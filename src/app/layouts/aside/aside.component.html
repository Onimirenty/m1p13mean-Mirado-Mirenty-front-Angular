<aside
  [class.translate-x-0]="isOpen()"
  [class.-translate-x-full]="!isOpen()"
  class="fixed bottom-0 left-0 w-full h-auto md:top-0 md:h-screen md:w-72 bg-dark-blue z-[60] shadow-[0_-10px_30px_-15px_rgba(0,0,0,0.5)] md:shadow-[10px_0_30px_-15px_rgba(0,0,0,0.5)] text-white transition-transform duration-500 border-t md:border-t-0 md:border-r border-white/10 flex flex-col">

  <!-- Header : Reste fixe en haut sur Desktop -->
  <div class="hidden md:flex h-16 shrink-0 items-center px-8 border-b border-white/5 bg-black/20">
    <span class="text-yellow-400 font-black tracking-widest text-xl"><i class="fas fa-bag-shopping"></i></span>
    <span class="ml-3 font-semibold text-gray-300 uppercase text-xs tracking-tighter">SHOPPING CENTER</span>
  </div>

  <!-- Nav : Scroll horizontal sur mobile / Scroll vertical sur desktop -->
  <nav class="flex flex-row md:flex-col p-2 md:p-4
            overflow-x-auto md:overflow-x-hidden md:overflow-y-auto
            flex-nowrap md:flex-nowrap
            gap-2 md:space-y-2
            scrollbar-hide
            max-h-[80vh] md:max-h-full"> <!-- Limite la hauteur sur mobile pour ne pas couvrir tout l'écran -->

    @for (menuItem of menuItems(); let i = $index ;track i) {
      <a [href]="menuItem.path"
         [class]="menuItem.active ? 'bg-yellow/20' : ''"
         class="group flex flex-col md:flex-row items-center gap-1 md:gap-4
                px-4 py-2 md:px-4 md:py-3 rounded-xl
                hover:bg-yellow/20 transition-all duration-200
                min-w-max md:min-w-0"> <!-- min-w-max seulement sur mobile -->

        <div [class]="'text-dark-blue p-2 rounded-lg transition-colors shrink-0'"
             [ngClass]="{'bg-yellow shadow-[0_0_15px_rgba(234,179,8,0.4)]': menuItem.active, 'bg-teal': !menuItem.active}">
          <i [class]="menuItem.class_icon + ' text-sm'"></i>
        </div>

        <span class="text-[10px] md:text-base font-medium truncate">{{ menuItem.label }}</span>
      </a>
    }
  </nav>

  <!-- Section Bas : Reste fixe en bas sur Desktop -->
  <div class="hidden md:block mt-auto p-6 border-t border-white/5">
    <button (click)="logout()" type="button" class="flex items-center justify-center gap-3 w-full py-3 rounded-xl border border-red text-red hover:bg-red hover:text-white transition-all duration-300 font-semibold text-sm">
      <i class="fas fa-sign-out-alt"></i>
      Déconnexion
    </button>
  </div>
</aside>
